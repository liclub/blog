---
layout: post
category: vue
title: vue通信及组件之间传值
tagline: by 明不知昔
tags: 
  - vue
published: true
---

常用 vue 通信大概有这几种方式进行：

- 组件间的父子之间的传值
- 组件间的子父之间的传值
- 非组件间的组件间的传值（简称：EventBus）
- sessionStorage 缓存传值
- 路由带参数跳转进行传值
- vuex 进行传值

<!--more-->

##  组件间的父子之间的传值

**思路：父组件调用子组件 dom 位置声明一个名称，然后在子组件接收这名称，便可直接调用。**

- 父组件（谁是父组件个人理解：谁引用谁的组件，谁就是父组件）：

![p1](https://camo.githubusercontent.com/26efadf3709bf05d062a790d02a8f31b89b96956/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d623332323530363632333533643435632e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

- 子组件：

![p2](https://camo.githubusercontent.com/54e8d2819fd0b54b8671df94969cd12b8a6937b0/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d333837363963363235363665386662352e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)



## 组件间的子父之间的传值

**思路：在子组件通过触发一个事件带值，让父组件接受这个事件，解析这个值**

- 子组件：

![p3](https://camo.githubusercontent.com/3c3bfbaa2ea0e746a508b89bf455f83bef5ad316/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d353638643934306335376666373063312e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

- 父组件：

![p4](https://camo.githubusercontent.com/c859749eec1c72eedaaca0607b162fbdc07c4938/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d343964653533376232656662376536342e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)



## 非组件间的组件间的传值（简称：EventBus）

先用例子来解释下组件间的关联：组件 A 比作一个路由器，通过中继器 (eventBus.js) 让其他房子接收到信号（组件B）

**思路：首先在src目录下创建一个eventBus.js文件，复制这行代码进去**

``` js
import Vue from 'vue'
let connect = new Vue()    // 实例
export default connect
```

- 组件A：

![p5](https://camo.githubusercontent.com/94bc2eae2240d26d3b1273a4fc23241925cf3e62/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d326361313836323030346532663234662e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

- 组件 B：

![p6](https://camo.githubusercontent.com/2f6fa3509bfd99e936207e5460407198cc3804c9/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d343632623764373161326562383232362e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

效果展示如下:

![p7](https://camo.githubusercontent.com/fffa910ca560c667f3e99efb5f0ac22bc3e06dda/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d376230306462306533333436383137312e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

![p8](https://camo.githubusercontent.com/0e1d5d644da09ae76bd0750cac70d42cf08229c8/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d313165353738653733663031626632332e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)



## sessionStorage 缓存

- 组件 A：

![p9](https://camo.githubusercontent.com/40da530008278a537d9c3d67196b066d2d23114f/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d386531386139653965306334333030382e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

- 组件 B：

![p10](https://camo.githubusercontent.com/f02c6a48a94850d083fca9e48594e50850b78c1e/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d636638356638376239326539386566392e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)



## 路由带参数跳转
- 组件 A：有路由默认的页面

![11](https://camo.githubusercontent.com/a240c0d90dbe0fe999f7c66348e47b9377c0d9eb/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d316562333030353734393534623564372e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

- 组件 B：路由其他页面 children

![p12](https://camo.githubusercontent.com/bb2590cd81f9e826fd05745f1e0a92530741371f/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d663161383934643364643937333639342e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

效果如下：

![p13](https://camo.githubusercontent.com/6efadd538fe3863d4ec5a3f836c27d3ca77b229e/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d636233313834653530666432373133662e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

![p14](https://camo.githubusercontent.com/dc7016bf225f37c9b45b81ed0673ed5f316a7040/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363230363931312d646263343434383030653031353131612e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)



## vuex 主要做数据交互，维护公共状态或数据

官方网站：[Vuex](https://vuex.vuejs.org/zh/)

多看几遍这图，vuex 基本就会使用，多加运用就会更加熟练。

![p15](https://vuex.vuejs.org/vuex.png)

src下创建一个store的文件夹，里面创建index.js文件

``` js
import Vue from 'vue'
import Vuex from 'vuex'
Vue.use(Vuex)
export default new Vuex.Store({
   state: {
   city: "上海"
   },
 
   actions: {
     handleCity(ctx, city) {
   // console.log(ctx, city)
       ctx.commit("handleCity", city)
    }
  },
mutations: {
     handleCity(state, city) {
      state.city = city
   }
   }
})
```

某文件触发事件

``` js
methods: {
    handleCityClick(city) {
      this.$store.dispatch("handleCity", "北京");
    },
```

展示页面

``` html
<h1>{{this.$store.state.city}}</h1>
```



## 致谢

本文摘抄至：[vue通信及组件之间传值](https://blog.csdn.net/weihaifeng163/article/details/88338822)